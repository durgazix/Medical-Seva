<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedicalGuru - Your AI Health Assistant</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/static/style.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <i class="fas fa-heartbeat"></i>
                <span>MedicalGuru</span>
            </div>
            <ul class="nav-menu">
                <li><a href="#home" class="nav-link">Home</a></li>
                <li><a href="#services" class="nav-link">Services</a></li>
                <li><a href="#features" class="nav-link">Features</a></li>
                <li><a href="#testimonials" class="nav-link">Testimonials</a></li>
                <li><a href="#contact" class="nav-link">Contact</a></li>
            </ul>
        </div>
    </nav>

    <section id="home" class="hero-section">
        <div class="hero-background">
            <div class="floating-particles"></div>
        </div>
        <div class="hero-content">
            <h1 class="hero-title">
                <span class="gradient-text">MedicalGuru</span>
                <span class="subtitle">Your AI-Powered Health Companion</span>
            </h1>
            <p class="hero-description">
                Get instant medical guidance, symptom analysis, and health recommendations 
                from our advanced AI assistant available 24/7
            </p>
            <div class="hero-buttons">
                <button class="cta-button primary" onclick="toggleChat()">
                    <i class="fas fa-comments"></i>
                    Start Chat Now
                </button>
                <button class="cta-button secondary">
                    <i class="fas fa-play-circle"></i>
                    Watch Demo
                </button>
            </div>
            <div class="hero-stats">
                <div class="stat-item">
                    <span class="stat-number">10K+</span>
                    <span class="stat-label">Active Users</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">24/7</span>
                    <span class="stat-label">Availability</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">95%</span>
                    <span class="stat-label">Accuracy Rate</span>
                </div>
            </div>
        </div>
    </section>

    <section id="services" class="services-section">
        <div class="container">
            <h2 class="section-title">Our Medical Services</h2>
            <div class="services-grid">
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-stethoscope"></i>
                    </div>
                    <h3>Symptom Checker</h3>
                    <p>Analyze your symptoms and get preliminary health insights</p>
                </div>
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-pills"></i>
                    </div>
                    <h3>Medicine Information</h3>
                    <p>Get detailed information about medications and interactions</p>
                </div>
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-user-md"></i>
                    </div>
                    <h3>Health Consultation</h3>
                    <p>Connect with AI for general health advice and guidance</p>
                </div>
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-clipboard-list"></i>
                    </div>
                    <h3>Health Records</h3>
                    <p>Keep track of your health history and medical records</p>
                </div>
            </div>
        </div>
    </section>

    <section id="features" class="features-section">
        <div class="container">
            <h2 class="section-title">Why Choose MedicalGuru?</h2>
            <div class="features-list">
                <div class="feature-item">
                    <i class="fas fa-brain feature-icon"></i>
                    <div class="feature-content">
                        <h3>AI-Powered Intelligence</h3>
                        <p>Advanced machine learning algorithms for accurate health insights</p>
                    </div>
                </div>
                <div class="feature-item">
                    <i class="fas fa-lock feature-icon"></i>
                    <div class="feature-content">
                        <h3>100% Private & Secure</h3>
                        <p>Your health data is encrypted and completely confidential</p>
                    </div>
                </div>
                <div class="feature-item">
                    <i class="fas fa-clock feature-icon"></i>
                    <div class="feature-content">
                        <h3>Instant Responses</h3>
                        <p>Get immediate answers to your health questions anytime</p>
                    </div>
                </div>
                <div class="feature-item">
                    <i class="fas fa-language feature-icon"></i>
                    <div class="feature-content">
                        <h3>Multi-Language Support</h3>
                        <p>Communicate in your preferred language for better understanding</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="testimonials" class="testimonials-section">
        <div class="container">
            <h2 class="section-title">What Our Users Say</h2>
            <div class="testimonials-grid">
                <div class="testimonial-card">
                    <div class="stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p>"MedicalGuru helped me understand my symptoms quickly. The AI is incredibly knowledgeable!"</p>
                    <div class="testimonial-author">
                        <strong>Sarah Johnson</strong>
                        <span>Verified User</span>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p>"Available 24/7 and always provides accurate information. A must-have health companion!"</p>
                    <div class="testimonial-author">
                        <strong>Michael Chen</strong>
                        <span>Regular User</span>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p>"The medicine interaction checker saved me from potential complications. Highly recommended!"</p>
                    <div class="testimonial-author">
                        <strong>Emma Williams</strong>
                        <span>Healthcare Professional</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="ai-agent-widget">
        <div class="chat-popup" id="chatPopup">
            <div class="chat-header">
                <div class="chat-header-info">
                    <div class="agent-avatar pulse-avatar">
                        <i class="fas fa-user-md"></i>
                    </div>
                    <div class="agent-status">
                        <div class="agent-name">Dr. MedicalGuru</div>
                        <div class="agent-online">
                            <div class="status-dot"></div>
                            Online â€¢ Ready to help
                        </div>
                    </div>
                </div>
                <div class="chat-actions">
                    <button class="action-btn" onclick="minimizeChat()">
                        <i class="fas fa-minus"></i>
                    </button>
                    <button class="action-btn" onclick="toggleFullscreen()">
                        <i class="fas fa-expand" id="fullscreenIcon"></i>
                    </button>
                    <button class="action-btn close-btn" onclick="toggleChat()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <div class="quick-actions" id="quickActions">
                <button class="quick-action-btn" onclick="sendQuickMessage('I need help with symptoms')">
                    <i class="fas fa-thermometer"></i> Symptoms
                </button>
                <button class="quick-action-btn" onclick="sendQuickMessage('Tell me about medications')">
                    <i class="fas fa-pills"></i> Medications
                </button>
                <button class="quick-action-btn" onclick="sendQuickMessage('I have a general health question')">
                    <i class="fas fa-question-circle"></i> General
                </button>
                <button class="quick-action-btn" onclick="sendQuickMessage('Emergency guidance needed')">
                    <i class="fas fa-ambulance"></i> Emergency
                </button>
            </div>

            <div class="chat-messages" id="chatMessages">
                <div class="message bot welcome-message">
                    <div class="message-avatar">
                        <i class="fas fa-user-md"></i>
                    </div>
                    <div class="message-content">
                        <div>ðŸ‘‹ Hello! I'm Dr. MedicalGuru, your AI health assistant.</div>
                        <div class="message-options">
                            <p>How can I help you today? You can ask me about:</p>
                            <ul>
                                <li>Symptom analysis and health concerns</li>
                                <li>Medication information and interactions</li>
                                <li>General health and wellness advice</li>
                                <li>Emergency guidance and first aid</li>
                            </ul>
                        </div>
                        <div class="message-time" id="welcomeTime"></div>
                    </div>
                </div>
            </div>

            <div class="chat-input">
                <div class="input-extras">
                    <button class="input-extra-btn" onclick="toggleVoiceInput()" title="Voice Input">
                        <i class="fas fa-microphone" id="voiceIcon"></i>
                    </button>
                    <button class="input-extra-btn" onclick="attachFile()" title="Attach File">
                        <i class="fas fa-paperclip"></i>
                    </button>
                </div>
                <div class="input-container">
                    <input type="text" class="message-input" id="messageInput" 
                           placeholder="Type your medical question..." />
                    <button class="send-btn" id="sendBtn" onclick="sendMessage()">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <div class="input-disclaimer">
                    <i class="fas fa-info-circle"></i>
                    <small>This is AI assistance. For emergencies, call emergency services.</small>
                </div>
            </div>
        </div>

        <div class="minimized-chat" id="minimizedChat" style="display: none;">
            <div class="minimized-header" onclick="restoreChat()">
                <i class="fas fa-user-md"></i>
                <span>Dr. MedicalGuru</span>
                <div class="minimized-status"></div>
            </div>
        </div>

        <button class="agent-trigger" id="agentTrigger" onclick="toggleChat()">
            <i class="fas fa-comments" id="triggerIcon"></i>
            <div class="notification-badge" id="notificationBadge" style="display: none;">1</div>
            <div class="trigger-tooltip">Chat with AI Doctor</div>
        </button>
    </div>

    <input type="file" id="fileInput" style="display: none;" accept="image/*,.pdf,.txt">

    <script>
        let chatOpen = false;
        let messageCount = 0;
        let isFullscreen = false;
        let isMinimized = false;
        let isRecording = false;

        // Initialize welcome time
        document.getElementById('welcomeTime').textContent = getCurrentTime();

        function toggleChat() {
            const popup = document.getElementById('chatPopup');
            const trigger = document.getElementById('agentTrigger');
            const triggerIcon = document.getElementById('triggerIcon');
            const badge = document.getElementById('notificationBadge');
            const minimized = document.getElementById('minimizedChat');
            
            chatOpen = !chatOpen;
            
            if (chatOpen) {
                popup.classList.add('active');
                trigger.classList.add('active');
                triggerIcon.className = 'fas fa-times';
                badge.style.display = 'none';
                minimized.style.display = 'none';
                isMinimized = false;
                document.getElementById('messageInput').focus();
                
                // Animate quick actions
                setTimeout(() => {
                    document.getElementById('quickActions').classList.add('show');
                }, 300);
            } else {
                popup.classList.remove('active');
                trigger.classList.remove('active');
                triggerIcon.className = 'fas fa-comments';
                document.getElementById('quickActions').classList.remove('show');
            }
        }

        function minimizeChat() {
            const popup = document.getElementById('chatPopup');
            const minimized = document.getElementById('minimizedChat');
            
            popup.classList.remove('active');
            minimized.style.display = 'flex';
            isMinimized = true;
        }

        function restoreChat() {
            const popup = document.getElementById('chatPopup');
            const minimized = document.getElementById('minimizedChat');
            
            popup.classList.add('active');
            minimized.style.display = 'none';
            isMinimized = false;
        }

        function toggleFullscreen() {
            const popup = document.getElementById('chatPopup');
            const icon = document.getElementById('fullscreenIcon');
            
            isFullscreen = !isFullscreen;
            
            if (isFullscreen) {
                popup.classList.add('fullscreen');
                icon.className = 'fas fa-compress';
            } else {
                popup.classList.remove('fullscreen');
                icon.className = 'fas fa-expand';
            }
        }

        function sendQuickMessage(message) {
            document.getElementById('messageInput').value = message;
            sendMessage();
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Hide quick actions after first message
            document.getElementById('quickActions').style.display = 'none';
            
            // Add user message with animation
            addMessage(message, 'user');
            input.value = '';
            
            // Show typing indicator
            showTypingIndicator();
            
            // Flask API call
            fetch('/get', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: 'msg=' + encodeURIComponent(message)
            })
            .then(response => response.text())
            .then(data => {
                hideTypingIndicator();
                addMessage(data, 'bot');
                
                // Show notification if chat is minimized
                if (isMinimized) {
                    showNotification();
                }
            })
            .catch(error => {
                hideTypingIndicator();
                addMessage('Sorry, I encountered an error. Please try again.', 'bot');
            });
        }

        function addMessage(text, sender) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.innerHTML = sender === 'bot' ? '<i class="fas fa-user-md"></i>' : '<i class="fas fa-user"></i>';
            
            const content = document.createElement('div');
            content.className = 'message-content';
            
            // Add reactions for bot messages
            const reactions = sender === 'bot' ? `
                <div class="message-reactions">
                    <button class="reaction-btn" onclick="reactToMessage(this, 'helpful')">
                        <i class="fas fa-thumbs-up"></i>
                    </button>
                    <button class="reaction-btn" onclick="reactToMessage(this, 'unhelpful')">
                        <i class="fas fa-thumbs-down"></i>
                    </button>
                    <button class="reaction-btn" onclick="copyMessage(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            ` : '';
            
            content.innerHTML = `
                <div class="message-text">${text}</div>
                <div class="message-time">${getCurrentTime()}</div>
                ${reactions}
            `;
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(content);
            messagesContainer.appendChild(messageDiv);
            
            // Scroll to bottom with smooth animation
            messagesContainer.scrollTo({
                top: messagesContainer.scrollHeight,
                behavior: 'smooth'
            });
            
            messageCount++;
        }

        function showTypingIndicator() {
            const messagesContainer = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot';
            typingDiv.id = 'typingIndicator';
            
            typingDiv.innerHTML = `
                <div class="message-avatar">
                    <i class="fas fa-user-md"></i>
                </div>
                <div class="typing-indicator">
                    <div class="typing-dots">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                    <span class="typing-text">Dr. MedicalGuru is typing...</span>
                </div>
            `;
            
            messagesContainer.appendChild(typingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        function toggleVoiceInput() {
            const icon = document.getElementById('voiceIcon');
            isRecording = !isRecording;
            
            if (isRecording) {
                icon.className = 'fas fa-microphone-slash';
                icon.parentElement.classList.add('recording');
                // Start voice recording logic here
                console.log('Recording started...');
            } else {
                icon.className = 'fas fa-microphone';
                icon.parentElement.classList.remove('recording');
                // Stop voice recording logic here
                console.log('Recording stopped...');
            }
        }

        function attachFile() {
            document.getElementById('fileInput').click();
        }

        function reactToMessage(btn, reaction) {
            btn.classList.toggle('reacted');
            // Send reaction to backend
            console.log('Reaction:', reaction);
        }

        function copyMessage(btn) {
            const messageText = btn.closest('.message-content').querySelector('.message-text').innerText;
            navigator.clipboard.writeText(messageText);
            
            // Show copied feedback
            const originalIcon = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-check"></i>';
            setTimeout(() => {
                btn.innerHTML = originalIcon;
            }, 2000);
        }

        function showNotification() {
            const badge = document.getElementById('notificationBadge');
            badge.style.display = 'flex';
            badge.textContent = '1';
        }

        function getCurrentTime() {
            const now = new Date();
            return now.getHours().toString().padStart(2, '0') + ':' + 
                   now.getMinutes().toString().padStart(2, '0');
        }

        // Handle Enter key press
        document.getElementById('messageInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Handle file input
        document.getElementById('fileInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                addMessage(`ðŸ“Ž Attached: ${file.name}`, 'user');
                // Handle file upload logic here
            }
        });

        // Smooth scroll for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Show welcome notification after delay
        setTimeout(() => {
            if (!chatOpen) {
                document.getElementById('notificationBadge').style.display = 'flex';
                document.getElementById('agentTrigger').classList.add('bounce');
                setTimeout(() => {
                    document.getElementById('agentTrigger').classList.remove('bounce');
                }, 1000);
            }
        }, 5000);
    </script>
</body>
</html>